import requests
import time

with open("wallet.txt", "r") as file:
    with open("transactions.txt", "w") as transactions_file:
        for line in file:
            address = line.strip()
            url = f"https://blockstream.info/api/address/{address}"
            response = requests.get(url)
            if response.status_code == 200:
                data = response.json()
                tx_count = data["chain_stats"]["tx_count"]
                funded_txo_sum = data["chain_stats"]["funded_txo_sum"]
                if tx_count > 0:
                    transactions_file.write(f"{address},{tx_count},{funded_txo_sum}\n")
            else:
                print(f"Request for address {address} failed with status code {response.status_code}")
            time.sleep(5)
